# 시스템 백업 경로 설정
# /home, /opt 등 사용자 데이터는 제외
# 시스템 운영에 필요한 설정만 백업

# 필수 시스템 설정 디렉토리
BACKUP_PATHS=(
    # 핵심 시스템 설정
    "/etc"                          # 모든 시스템 설정 파일

    # 부트 설정
    "/boot/grub"                    # GRUB 부트로더 설정

    # 루트 사용자 설정
    "/root/.bashrc"
    "/root/.profile"
    "/root/.bash_aliases"
    "/root/.ssh"                    # SSH 키 (선택적)

    # 백업 자동화 설정
    "/home/koopark/STCServiceAutomation/backupAutomation/config"  # 백업 설정 파일

    # 네트워크 설정 (추가 확인용)
    # /etc에 포함되지만 명시적으로 중요 표시
    # /etc/network
    # /etc/netplan
    # /etc/NetworkManager

    # Cron 작업
    "/var/spool/cron"               # 사용자별 crontab

    # 시스템 서비스 로그 (선택적, 설정 참고용)
    "/var/log/syslog"
    "/var/log/auth.log"
    "/var/log/dpkg.log"
    "/var/log/apt"
)

# 명시적 제외 경로 (사용자 데이터)
EXCLUDE_PATHS=(
    # 사용자 데이터
    "/home"                         # 사용자 홈 디렉토리
    "/opt"                          # 선택적 응용프로그램

    # 대용량 데이터 디렉토리
    "/var/www"                      # 웹 서버 데이터
    "/srv"                          # 서비스 데이터
    "/var/lib/docker"               # Docker 데이터
    "/var/lib/mysql"                # MySQL 데이터
    "/var/lib/postgresql"           # PostgreSQL 데이터

    # 임시 및 캐시
    "/tmp"
    "/var/tmp"
    "/var/cache"
    "/var/backups"                  # 기존 백업 제외

    # 시스템 가상 파일시스템
    "/proc"
    "/sys"
    "/dev"
    "/run"

    # 마운트 포인트
    "/mnt"
    "/media"

    # 기타
    "/lost+found"
    "/swapfile"
    "*/.cache"
)

# 백업할 파일 패턴 제외
EXCLUDE_PATTERNS=(
    "*.log"                         # 로그 파일 (일부는 개별 지정)
    "*.cache"
    "*.tmp"
    "*~"
    "*.bak"
    ".DS_Store"
    "*.sock"
    "*.pid"
    "*.lock"
)

# 추가로 백업할 시스템 정보 (텍스트 파일로 저장)
SYSTEM_INFO_COMMANDS=(
    "dpkg -l"                       # 설치된 패키지 목록
    "systemctl list-unit-files"    # 서비스 상태
    "ip addr show"                 # 네트워크 인터페이스
    "ip route show"                # 라우팅 테이블
    "iptables -L -n -v"            # 방화벽 규칙
    "df -h"                        # 디스크 사용량
    "mount"                        # 마운트 포인트
    "cat /etc/fstab"               # 파일시스템 테이블
    "lsblk -f"                     # 블록 디바이스
    "uname -a"                     # 커널 정보
    "lspci"                        # PCI 디바이스
    "lsmod"                        # 로드된 커널 모듈
    "sysctl -a"                    # 커널 파라미터
)

# RAID 관련 명령 (RAID 사용 시)
RAID_INFO_COMMANDS=(
    "cat /proc/mdstat"             # 소프트웨어 RAID 상태
    "mdadm --detail --scan"        # RAID 배열 정보
    "megacli -CfgDsply -aALL"      # LSI MegaRAID (있는 경우)
    "arcconf getconfig 1"          # Adaptec RAID (있는 경우)
)

# LVM 관련 명령 (LVM 사용 시)
LVM_INFO_COMMANDS=(
    "pvdisplay"                    # Physical Volume
    "vgdisplay"                    # Volume Group
    "lvdisplay"                    # Logical Volume
    "lvscan"                       # LV 스캔
)
